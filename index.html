
<html>
<head>
<script type="text/javascript" src="javascripts/index.js"></script>
<script type="text/javascript" src="javascripts/jquery.js"></script>

<!-- paste this code into your webpage -->
<link href="stylesheets/tablecloth.css" rel="stylesheet" type="text/css" media="screen" />
<link href="stylesheets/style.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="javascripts/tablecloth.js"></script>
<script src="javascripts/jquery.min.js"></script>
<script src="javascripts/main.js"></script>
<!-- end -->

<style>
body{
	margin:0;
	padding:0;
	background:#f1f1f1;
	font:80% Arial, Helvetica, sans-serif; 
	color:#555;
	line-height:150%;
	text-align:center;
}
#container{
	margin:0 auto;
	width:800px;
	background:#fff;
	padding-bottom:20px;
}
#content{
	margin:0 80px;
}
</style>

<script type="text/javascript">

$(document).ready(function(){
  $("button").click(function(){
	var name = document.getElementById("card_name").value; 
	var url = "https://api.mongolab.com/api/1/databases/mycard/collections/lang_zh?apiKey=508e5726e4b0c54ca4492ead"
	var q = JSON.stringify( {name: {$regex: name.replace(/([.?*+^$[\]\\(){}|-])/g, '\\$1'), $options: 'i'}});
	var url2=url + '&q=' + q;
    $.getJSON(url2,function(result){
		var div=document.getElementById("result");  
		if(div){
			div.parentNode.removeChild(div);
		}
		var html;
		html = "<div id='result'>";
	    html = html + "<table >";
		html = html + "<tr>";
		html = html + "<th width='45px'>卡图</th>";
		html = html + "<th width='60px'>密码</th>";
		html = html + "<th width='120px'>卡名</th>";
		html = html + "<th>效果</th>";
		html = html + "</tr>";
		
		$.each(result, function(i, card){
		html = html + "<tr>";
		html = html + "<td><img src='" + "https://raw.github.com/zh99998/ygopro-images/master/thumbnail/" + card._id + ".jpg'>" + "</td>";
		html = html + "<td>" + card._id + "</td>";
		html = html + "<td noWrap>" + card.name + "</td>";
		html = html + "<td>" + card.desc + "</td>";
		html = html + "</tr>";
      });
	  html = html + "</table>";
	  html = html + "</div>";
	  $(html).appendTo("#content");
    });
  });
});
</script>

</head>

<body>
	<header>
		<h1>网页卡查</h1>
	</header>
	<div id="banner">
		<input id="card_name" type="text" value="甜点"/>
		<button class="button">查询</button>
	</div>
    <div class="wrapper">
	<div id="content"></div>
	</div>
</body>
</html>
